<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶®‡¶ø‡¶â‡¶ú ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ -bangladesh-pulse</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Noto Sans Bengali', 'SolaimanLipi', Arial, sans-serif; line-height: 1.6; color: #ffffff; background: #1a1a1a; }
        header { background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%); color: white; padding: 1rem 0; box-shadow: 0 2px 10px rgba(255,0,0,0.3); position: sticky; top: 0; z-index: 1000; border-bottom: 2px solid #ff0000; }
        .header-container { max-width: 1200px; margin: 0 auto; padding: 0 20px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; }
        .logo { display: flex; align-items: center; text-decoration: none; }
        .logo-img { height: 55px; width: auto; max-width: 220px; object-fit: contain; transition: transform 0.3s;}
        .logo-img:hover { transform: scale(1.05); }
        nav ul { display: flex; list-style: none; gap: 2rem; flex-wrap: wrap; }
        nav a { color: white; text-decoration: none; font-weight: 500; transition: all 0.3s; padding: 0.5rem 1rem; border-radius: 5px; }
        nav a:hover { background: #ff0000; transform: translateY(-2px); }
        .news-detail-container { max-width: 900px; margin: 2rem auto; padding: 0 20px; }
        .news-detail-card { background: #000000; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 6px rgba(255,0,0,0.2); padding: 2rem; border: 1px solid #333; }
        .news-detail-category { display: inline-block; background: #ff0000; color: white; padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.9rem; margin-bottom: 1rem; }
        .news-detail-title { font-size: 2.5rem; font-weight: bold; color: #ffffff; margin-bottom: 1rem; line-height: 1.3; }
        .news-detail-meta { display: flex; gap: 2rem; color: #999; font-size: 1rem; padding-bottom: 1.5rem; margin-bottom: 1.5rem; border-bottom: 2px solid #333; }
        .news-detail-image { width: 100%; height: 450px; object-fit: cover; border-radius: 10px; margin: 2rem 0; border: 2px solid #333; }
        .news-detail-placeholder { width: 100%; height: 450px; background: linear-gradient(135deg, #ff0000, #000000); border-radius: 10px; margin: 2rem 0; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem; }
        .news-detail-content { font-size: 1.2rem; line-height: 1.9; color: #cccccc; margin: 2rem 0; text-align: justify; }
        .back-button { display: inline-block; padding: 0.8rem 1.8rem; background: #ff0000; color: white; text-decoration: none; border-radius: 25px; margin-top: 2rem; transition: all 0.3s; font-weight: 500; }
        .back-button:hover { transform: translateX(-5px); box-shadow: 0 4px 10px rgba(255,0,0,0.4); background: #cc0000; }
        .related-news { margin-top: 3rem; padding-top: 2rem; border-top: 2px solid #333; }
        .related-news-title { font-size: 1.8rem; font-weight: bold; margin-bottom: 1.5rem; color: #ff0000; }
        .related-news-item { padding: 1rem; background: #1a1a1a; border-radius: 8px; margin-bottom: 1rem; cursor: pointer; transition: all 0.3s; border: 1px solid #333; }
        .related-news-item:hover { background: #2a2a2a; transform: translateX(5px); border-color: #ff0000; }
        footer { background: #000000; color: white; padding: 2rem 0; text-align: center; margin-top: 3rem; border-top: 2px solid #ff0000; }
        @media (max-width: 768px) { .header-container { flex-direction: column; gap: 1rem; } .logo-img { height: 45px; } nav ul { gap: 1rem; justify-content: center; } .news-detail-title { font-size: 1.8rem; } .news-detail-content { font-size: 1.1rem; } .news-detail-image, .news-detail-placeholder { height: 250px; } .news-detail-meta { flex-direction: column; gap: 0.5rem; } }
        .loading { text-align: center; padding: 3rem; font-size: 1.3rem; color: #ff0000; }
    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <a href="index.html" class="logo">
                <img src="logo/logo.png" alt="‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶®‡¶ø‡¶â‡¶ú ‡¶≤‡ßã‡¶ó‡ßã" class="logo-img">
            </a>
            <nav>
                <ul>
                    <li><a href="index.html">‡¶π‡ßã‡¶Æ</a></li>
                    <li><a href="index.html">‡¶ú‡¶æ‡¶§‡ßÄ‡¶Ø‡¶º</a></li>
                    <li><a href="index.html">‡¶Ü‡¶®‡ßç‡¶§‡¶∞‡ßç‡¶ú‡¶æ‡¶§‡¶ø‡¶ï</a></li>
                    <li><a href="index.html">‡¶ñ‡ßá‡¶≤‡¶æ</a></li>
                    <li><a href="index.html">‡¶™‡ßç‡¶∞‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§‡¶ø</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="news-detail-container" id="newsDetailContainer">
        <div class="loading">‡¶ñ‡¶¨‡¶∞ ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
    </div>

    <footer>
        <p>&copy; ‡ß®‡ß¶‡ß®‡ß™ bangladesh-pulse ‡¶™‡ßã‡¶∞‡ßç‡¶ü‡¶æ‡¶≤ | ‡¶∏‡¶∞‡ßç‡¶¨‡¶∏‡ßç‡¶¨‡¶§‡ßç‡¶¨ ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§</p>
    </footer>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, getDocs, query, where } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        const firebaseConfig = {
            apiKey: "AIzaSyDElfSp32D212HzT6dPjqXcRhz8pK2xVH4",
            authDomain: "bangladesh-pulse.firebaseapp.com",
            projectId: "bangladesh-pulse",
            storageBucket: "bangladesh-pulse.firebasestorage.app",
            messagingSenderId: "582457283138",
            appId: "1:582457283138:web:3398e34939072208d293db",
            measurementId: "G-KCYNB9XZXF"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        const urlParams = new URLSearchParams(window.location.search);
        const newsId = parseInt(urlParams.get('id'));
        const container = document.getElementById('newsDetailContainer');

        async function loadNewsDetail() {
            try {
                const q = query(collection(db, 'news'), where('id', '==', newsId));
                const querySnapshot = await getDocs(q);
                
                if (querySnapshot.empty) {
                    container.innerHTML = `
                        <div class="news-detail-card">
                            <div class="loading">‡¶®‡¶ø‡¶â‡¶ú ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø</div>
                            <a href="index.html" class="back-button">‚Üê ‡¶™‡ßÉ‡¶ö‡ßç‡¶õ‡¶¶‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®</a>
                        </div>
                    `;
                    return;
                }

                let news = null;
                querySnapshot.forEach((doc) => {
                    news = { docId: doc.id, ...doc.data() };
                });

                const allNewsQuery = query(collection(db, 'news'), where('category', '==', news.category));
                const allNewsSnapshot = await getDocs(allNewsQuery);
                const relatedNews = [];
                allNewsSnapshot.forEach((doc) => {
                    const data = { docId: doc.id, ...doc.data() };
                    if (data.id !== news.id) {
                        relatedNews.push(data);
                    }
                });

                const related = relatedNews.slice(0, 3);

                container.innerHTML = `
                    <div class="news-detail-card">
                        <span class="news-detail-category">${news.category}</span>
                        <h1 class="news-detail-title">${news.title}</h1>
                        <div class="news-detail-meta">
                            <span>üìÖ ${news.date}</span>
                            <span>üëÅÔ∏è ${news.views} ‡¶ú‡¶® ‡¶™‡¶°‡¶º‡ßá‡¶õ‡ßá‡¶®</span>
                        </div>
                        
                        ${news.image ? 
                            `<img src="${news.image}" alt="${news.title}" class="news-detail-image">` : 
                            '<div class="news-detail-placeholder">üì∞ ‡¶®‡¶ø‡¶â‡¶ú ‡¶á‡¶Æ‡ßá‡¶ú</div>'
                        }
                        
                        <div class="news-detail-content">
                            <p>${news.fullContent}</p>
                        </div>
                        
                        <a href="index.html" class="back-button">‚Üê ‡¶™‡ßÉ‡¶ö‡ßç‡¶õ‡¶¶‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®</a>

                        ${related.length > 0 ? `
                            <div class="related-news">
                                <h2 class="related-news-title">‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡¶ø‡¶§ ‡¶ñ‡¶¨‡¶∞</h2>
                                ${related.map(rNews => `
                                    <div class="related-news-item" onclick="window.location.href='news-detail.html?id=${rNews.id}'">
                                        <strong style="color: #ffffff;">${rNews.title}</strong>
                                        <p style="color: #999; font-size: 0.95rem; margin-top: 0.5rem;">${rNews.excerpt}</p>
                                    </div>
                                `).join('')}
                            </div>
                        ` : ''}
                    </div>
                `;
            } catch (error) {
                console.error('Error loading news:', error);
                container.innerHTML = `
                    <div class="news-detail-card">
                        <div class="loading">‡¶ñ‡¶¨‡¶∞ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá</div>
                        <a href="index.html" class="back-button">‚Üê ‡¶™‡ßÉ‡¶ö‡ßç‡¶õ‡¶¶‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®</a>
                    </div>
                `;
            }
        }

        loadNewsDetail();
    </script>
</body>
</html>